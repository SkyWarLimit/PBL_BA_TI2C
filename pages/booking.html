<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratorium Business Analytics</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Fonts - Nunito -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,200..1000;1,200..1000&display=swap"
        rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../assets/css/bookingStyle.css">
</head>

<body>
    <!-- Sticky Navigation Bar -->
    <nav class="sticky-navbar">
        <div class="logo-container">
            <div class="logo">
                <img src="../assets/img/logo.png" alt="Laboratorium Business Analytics Logo">
            </div>
            <div class="lab-name-container">
                <div class="lab-name">Laboratorium Business Analytics</div>
                <div class="lab-tagline">Transforming Data into Decisions</div>
            </div>
        </div>

        <ul class="nav-menu">
            <li class="nav-item">
                <a class="nav-link" href="beranda.html">Beranda</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="profile.html">Profil</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#">
                    Publikasi
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="berita.html">Berita</a></li>
                    <li><a class="dropdown-item" href="galeri.html">Gallery</a></li>
                    <li><a class="dropdown-item" href="newsInputService.html">News Input Service</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle active" href="#">
                    Peminjaman Lab
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="infoPeminjaman.html">Informasi Laboratorium</a></li>
                    <li><a class="dropdown-item" href="tableBooking.html">Table Peminjaman</a></li>
                    <li><a class="dropdown-item" href="booking.html">Pemesanan Lab</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="kontak.html">Kontak</a>
            </li>
        </ul>
        
        <button class="login-btn">Login</button>
    </nav>

    <!-- Main Content -->
    <div class="content-container">
        <div class="container-fluid">
            <div class="row">
                <!-- Left Content -->
                <div class="col-lg-7">
                    <nav aria-label="breadcrumb">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item"><a href="#">Beranda</a></li>
                            <li class="breadcrumb-item"><a href="infoPeminjaman.html">Informasi Peminjaman</a></li>
                            <li class="breadcrumb-item" aria-current="page">Request Laboratory Access</li>
                        </ol>
                    </nav>

                    <h1 class="section-title">Request Laboratory Access</h1>
                    <p class="section-content">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.
                    </p>

                    <h2 class="section-title">Consultation</h2>
                    <p class="section-content">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut
                        labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco
                        laboris nisi ut aliquip ex ea commodo consequat.
                    </p>
                </div>

                <!-- Right Content -->
                <div class="col-lg-5">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <div class="calendar-month" id="current-month">September 2023</div>
                            <div class="calendar-nav">
                                <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                                <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                            </div>
                        </div>

                        <table class="calendar-table" id="calendar-body">
                            <thead>
                                <tr>
                                    <th>Mon</th>
                                    <th>Tue</th>
                                    <th>Wed</th>
                                    <th>Thu</th>
                                    <th>Fri</th>
                                    <th>Sat</th>
                                    <th>Sun</th>
                                </tr>
                            </thead>
                            <tbody id="calendar-days">
                                <!-- Calendar days will be generated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <div class="booking-form">
                        <h3 class="section-title" style="font-size: 24px;">Booking</h3>

                        <div class="form-group">
                            <label class="form-label">Tanggal</label>
                            <input type="date" class="form-control" id="booking-date">
                        </div>

                        <div class="time-inputs">
                            <div class="form-group">
                                <label class="form-label">Check-in</label>
                                <input type="time" class="form-control" id="checkin-time">
                            </div>

                            <div class="form-group">
                                <label class="form-label">Check-out</label>
                                <input type="time" class="form-control" id="checkout-time">
                            </div>
                        </div>

                        <button class="booking-btn">Booking</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        // JavaScript untuk Sticky Navbar
        document.addEventListener('DOMContentLoaded', function () {
            const allNavLinks = document.querySelectorAll('.nav-link');
            const dropdownItems = document.querySelectorAll('.dropdown-item');

            // Fungsi untuk set menu aktif
            function setActiveMenu(clickedElement) {
                // Remove active class dari semua menu
                allNavLinks.forEach(link => link.classList.remove('active'));

                // Add active class ke element yang diklik
                if (clickedElement.classList.contains('dropdown-item')) {
                    // Jika yang diklik adalah dropdown item, aktifkan parent dropdown
                    const parentDropdown = clickedElement.closest('.dropdown');
                    const dropdownToggle = parentDropdown.querySelector('.dropdown-toggle');
                    dropdownToggle.classList.add('active');
                } else {
                    // Jika yang diklik adalah menu biasa
                    clickedElement.classList.add('active');
                }
            }

            // Event listeners untuk menu biasa
            allNavLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    // Jangan set active untuk dropdown toggle (karena sudah hover)
                    if (!this.classList.contains('dropdown-toggle')) {
                        setActiveMenu(this);
                    }
                });
            });

            // Event listeners untuk dropdown items
            dropdownItems.forEach(item => {
                item.addEventListener('click', function (e) {
                    e.preventDefault();
                    setActiveMenu(this);
                });
            });

            // Untuk mobile devices, tetap gunakan Bootstrap dropdown
            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', function (e) {
                    if (window.innerWidth <= 992) {
                        e.preventDefault();
                        const dropdownMenu = this.nextElementSibling;
                        dropdownMenu.classList.toggle('show');
                    }
                });
            });

            // Tutup dropdown ketika klik di luar
            document.addEventListener('click', function (e) {
                if (window.innerWidth <= 992) {
                    if (!e.target.closest('.dropdown')) {
                        document.querySelectorAll('.dropdown-menu').forEach(menu => {
                            menu.classList.remove('show');
                        });
                    }
                }
            });

            // Calendar functionality
            let currentDate = new Date();
            const calendarMonth = document.getElementById('current-month');
            const calendarDays = document.getElementById('calendar-days');
            const prevMonthBtn = document.getElementById('prev-month');
            const nextMonthBtn = document.getElementById('next-month');
            const bookingDateInput = document.getElementById('booking-date');

            // Set today's date as default
            const today = new Date();
            const formattedDate = today.toISOString().split('T')[0];
            bookingDateInput.value = formattedDate;

            // Function to generate calendar
            function generateCalendar(date) {
                const year = date.getFullYear();
                const month = date.getMonth();

                // Update month display
                const monthNames = ["Januari", "Februari", "Maret", "April", "Mei", "Juni",
                    "Juli", "Agustus", "September", "Oktober", "November", "Desember"];
                calendarMonth.textContent = `${monthNames[month]} ${year}`;

                // Clear previous calendar
                calendarDays.innerHTML = '';

                // Get first day of month and last day of month
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);

                // Get day of week for first day (0 = Sunday, 1 = Monday, etc.)
                let firstDayIndex = firstDay.getDay();
                // Adjust for Monday as first day of week
                firstDayIndex = firstDayIndex === 0 ? 6 : firstDayIndex - 1;

                // Get last day of previous month
                const prevMonthLastDay = new Date(year, month, 0).getDate();

                // Generate calendar days
                let dayCount = 1;
                let nextMonthDayCount = 1;

                for (let i = 0; i < 6; i++) {
                    const row = document.createElement('tr');

                    for (let j = 0; j < 7; j++) {
                        const cell = document.createElement('td');

                        if (i === 0 && j < firstDayIndex) {
                            // Days from previous month
                            const day = prevMonthLastDay - firstDayIndex + j + 1;
                            cell.textContent = day;
                            cell.classList.add('other-month');
                        } else if (dayCount > lastDay.getDate()) {
                            // Days from next month
                            cell.textContent = nextMonthDayCount;
                            cell.classList.add('other-month');
                            nextMonthDayCount++;
                        } else {
                            // Days from current month
                            cell.textContent = dayCount;

                            // Highlight today
                            const today = new Date();
                            if (dayCount === today.getDate() &&
                                month === today.getMonth() &&
                                year === today.getFullYear()) {
                                cell.classList.add('active');

                                // Set today as default booking date
                                if (bookingDateInput.value === '') {
                                    bookingDateInput.value = today.toISOString().split('T')[0];
                                }
                            }

                            // Add click event
                            cell.addEventListener('click', function () {
                                // Remove active class from all days
                                document.querySelectorAll('#calendar-days td').forEach(d => {
                                    d.classList.remove('active');
                                });

                                // Add active class to clicked day
                                this.classList.add('active');

                                // Update the booking date input
                                const selectedDate = new Date(year, month, dayCount);
                                const formattedSelectedDate = selectedDate.toISOString().split('T')[0];
                                bookingDateInput.value = formattedSelectedDate;
                            });

                            dayCount++;
                        }

                        row.appendChild(cell);
                    }

                    calendarDays.appendChild(row);

                    // Stop if we've displayed all days
                    if (dayCount > lastDay.getDate() && nextMonthDayCount > 7) {
                        break;
                    }
                }
            }

            // Initialize calendar
            generateCalendar(currentDate);

            // Calendar navigation
            prevMonthBtn.addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() - 1);
                generateCalendar(currentDate);
            });

            nextMonthBtn.addEventListener('click', function () {
                currentDate.setMonth(currentDate.getMonth() + 1);
                generateCalendar(currentDate);
            });

            // Booking form submission
            const bookingBtn = document.querySelector('.booking-btn');
            bookingBtn.addEventListener('click', function () {
                const date = bookingDateInput.value;
                const checkin = document.getElementById('checkin-time').value;
                const checkout = document.getElementById('checkout-time').value;

                if (!date || !checkin || !checkout) {
                    alert('Harap lengkapi semua field booking');
                    return;
                }

                alert(`Booking berhasil!\nTanggal: ${date}\nCheck-in: ${checkin}\nCheck-out: ${checkout}`);
            });
        });
    </script>
</body>

</html>