<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laboratory Business Analytics</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome untuk ikon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="headerStyle.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:ital,wght@0,400;0,600;0,700;0,800;1,700;1,800&display=swap"
        rel="stylesheet">
</head>

<body>
    <!-- Sticky Navigation Bar -->
    <nav class="sticky-navbar">
        <div class="logo-container">
            <div class="logo">
                <img src="img/logo.png" alt="Laboratorium Business Analytics Logo">
            </div>
        <div class="lab-name-container">
            <div class="lab-name">Laboratorium Business Analytics</div>
            <div class="lab-tagline">Transforming Data into Decisions</div>
        </div>
    </div>

    <!-- Hamburger Menu Button (Mobile Only) -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <ul class="nav-menu" id="navMenu">
        <!-- Mobile Logo Container -->
        <li class="nav-item mobile-logo-item">
            <div class="mobile-logo-container">
                <div class="logo">
                    <img src="img/logo.png" alt="Laboratorium Business Analytics Logo">
                </div>
                <div class="lab-name">Laboratorium Business Analytics</div>
            </div>
        </li>
            <li class="nav-item">
                <a class="nav-link active" href="beranda.html">Beranda</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="profile.html">Profil</a>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" onclick="toggleDropdown(event, this)">
                    Publikasi
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="berita.html">Berita</a></li>
                    <li><a class="dropdown-item" href="galeri.html">Gallery</a></li>
                    <li><a class="dropdown-item" href="newsInputService.html">News Input Service</a></li>
                </ul>
            </li>
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" onclick="toggleDropdown(event, this)">
                    Peminjaman Lab
                    <i class="fas fa-chevron-down dropdown-icon"></i>
                </a>
                <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="infoPeminjaman.html">Informasi Laboratorium</a></li>
                    <li><a class="dropdown-item" href="tableBooking.html">Table Peminjaman</a></li>
                    <li><a class="dropdown-item" href="formBooking.html">Pemesanan Lab</a></li>
                </ul>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="kontak.html">Kontak</a>
            </li>
            <!-- Login Button in Mobile Menu -->
            <li class="nav-item mobile-login-item">
                <button class="login-btn mobile-login-btn">Login</button>
            </li>
        </ul>
        
        <!-- Login Button for Desktop -->
        <button class="login-btn desktop-login-btn">Login</button>
    </nav>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Custom JavaScript -->
    <script>
        // JavaScript untuk Sticky Navbar
        document.addEventListener('DOMContentLoaded', function () {
            const allNavLinks = document.querySelectorAll('.nav-link');
            const dropdownItems = document.querySelectorAll('.dropdown-item');

            // Fungsi untuk set menu aktif
            function setActiveMenu(clickedElement) {
                // Remove active class dari semua menu
                allNavLinks.forEach(link => link.classList.remove('active'));

                // Add active class ke element yang diklik
                if (clickedElement.classList.contains('dropdown-item')) {
                    // Jika yang diklik adalah dropdown item, aktifkan parent dropdown
                    const parentDropdown = clickedElement.closest('.dropdown');
                    const dropdownToggle = parentDropdown.querySelector('.dropdown-toggle');
                    dropdownToggle.classList.add('active');
                } else {
                    // Jika yang diklik adalah menu biasa
                    clickedElement.classList.add('active');
                }
            }

            // Event listeners untuk menu biasa
            allNavLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    // Hanya prevent default untuk dropdown toggle
                    if (this.classList.contains('dropdown-toggle')) {
                        // toggleDropdown akan handle preventDefault
                        setActiveMenu(this);
                    } else {
                        // Untuk link biasa, biarkan navigasi normal
                        setActiveMenu(this);
                    }
                });
            });

            // Event listeners untuk dropdown items
            dropdownItems.forEach(item => {
                item.addEventListener('click', function (e) {
                    // Biarkan navigasi normal untuk dropdown items
                    setActiveMenu(this);
                });
            });

            // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileMenuToggle && navMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenuToggle.classList.toggle('active');
                    navMenu.classList.toggle('active');
                    document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
                });
                
                // Close menu when clicking on a link
                const navLinks = navMenu.querySelectorAll('.nav-link:not(.dropdown-toggle)');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        document.body.style.overflow = '';
                    });
                });
            }

            // Toggle Dropdown for Mobile only (Desktop uses hover)
            // Make it global so it can be called from onclick attribute
            window.toggleDropdown = function(event, element) {
                // Hanya jalankan di mobile (â‰¤768px)
                if (window.innerWidth > 768) {
                    return; // Skip click handler di desktop
                }
                
                event.preventDefault();
                event.stopPropagation();
                
                const dropdown = element.nextElementSibling;
                const allDropdowns = document.querySelectorAll('.dropdown-menu');
                const allIcons = document.querySelectorAll('.dropdown-icon');
                
                // Close all other dropdowns
                allDropdowns.forEach(dd => {
                    if (dd !== dropdown) {
                        dd.classList.remove('show');
                    }
                });
                
                // Reset all icons
                allIcons.forEach(icon => {
                    if (icon !== element.querySelector('.dropdown-icon')) {
                        icon.style.transform = 'rotate(0deg)';
                    }
                });
                
                // Toggle current dropdown
                if (dropdown) {
                    dropdown.classList.toggle('show');
                    
                    // Rotate chevron icon
                    const icon = element.querySelector('.dropdown-icon');
                    if (icon) {
                        icon.style.transform = dropdown.classList.contains('show') ? 'rotate(180deg)' : 'rotate(0deg)';
                    }
                }
            };

            // Dropdown toggles are handled by onclick attribute in HTML
            // Additional event listeners are not needed since toggleDropdown is called from onclick
            
            // Close dropdown and mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                // Close dropdown jika klik di luar dropdown
                if (!event.target.closest('.nav-item.dropdown')) {
                    const allDropdowns = document.querySelectorAll('.dropdown-menu');
                    const allIcons = document.querySelectorAll('.dropdown-icon');
                    
                    allDropdowns.forEach(dd => {
                        dd.classList.remove('show');
                    });
                    
                    allIcons.forEach(icon => {
                        icon.style.transform = 'rotate(0deg)';
                    });
                }
                
                // Close mobile menu jika klik di luar (hanya jika menu aktif)
                if (mobileMenuToggle && navMenu && navMenu.classList.contains('active')) {
                    const isClickInsideNav = navMenu.contains(event.target);
                    const isClickOnToggle = mobileMenuToggle.contains(event.target);
                    
                    if (!isClickInsideNav && !isClickOnToggle) {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                }
            });
        });

        // Mobile Menu Toggle
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const navMenu = document.getElementById('navMenu');
            
            if (mobileMenuToggle && navMenu) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenuToggle.classList.toggle('active');
                    navMenu.classList.toggle('active');
                    // HAPUS BARIS INI: document.body.style.overflow = navMenu.classList.contains('active') ? 'hidden' : '';
                });
                
                // Close menu when clicking on a link
                const navLinks = navMenu.querySelectorAll('.nav-link:not(.dropdown-toggle)');
                navLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        // HAPUS BARIS INI: document.body.style.overflow = '';
                    });
                });
            }

            // ... (Kode toggleDropdown) ...

            // Close dropdown and mobile menu when clicking outside
            document.addEventListener('click', function(event) {
                // Close dropdown jika klik di luar dropdown
                // ... (Kode penutupan dropdown) ...
                
                // Close mobile menu jika klik di luar (hanya jika menu aktif)
                if (mobileMenuToggle && navMenu && navMenu.classList.contains('active')) {
                    // Cek apakah klik BUKAN di dalam nav-menu dan BUKAN di toggle button
                    const isClickInsideNav = navMenu.contains(event.target);
                    const isClickOnToggle = mobileMenuToggle.contains(event.target);
                    
                    if (!isClickInsideNav && !isClickOnToggle) {
                        mobileMenuToggle.classList.remove('active');
                        navMenu.classList.remove('active');
                        // HAPUS BARIS INI: document.body.style.overflow = '';
                    }
                }
            });
    </script>
</body>

</html>